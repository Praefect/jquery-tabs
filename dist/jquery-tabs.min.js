/*! jQuery tabs - v0.1.1 - 2013-07-24
* https://github.com/amazingSurge/jquery-tabs
* Copyright (c) 2013 amazingSurge; Licensed GPL */
(function(t,s,e,a){"use strict";var n=e(s),i=e.Tabs=function(t,s){var a=this;this.element=t,this.$element=e(t);var n=[];e.each(this.$element.data(),function(t,s){var e=RegExp("^tabs","i");e.test(t)&&(n[t.toLowerCase().replace(e,"")]=s)}),this.options=e.extend(!0,{},i.defaults,s,n),this.namespace=this.options.namespace,this.classes={activeTab:this.namespace+"_active",activePanes:this.namespace+"_active",effect:this.namespace+"-"+this.options.effect,show:this.namespace+"-"+this.options.effect+"_show",panes:this.namespace+"-panes",skin:this.namespace+"_"+this.options.skin},this.$tabs=this.$element.children(),this.$panes=e(this.options.panes).addClass(this.classes.panes+" "+this.classes.effect),this.$panesItem=this.$panes.children(),this.options.skin&&(this.$tabs.addClass(this.classes.skin),this.$panes.addClass(this.classes.skin)),this.$loading=e('<span class="'+this.namespace+'-loading"></span>'),this.options.ajax===!0&&(this.ajax=[],e.each(this.$tabs,function(t,s){var n={};n.href=e(s).data("href"),a.ajax.push(n)})),this.init()};i.defaults={namespace:"tabs",panes:".panes",skin:null,initialIndex:0,effect:"fade",ajax:!1,cached:!1,history:!1,keyboard:!1,event:"click"},i.prototype={constructor:i,init:function(){var t=this;this.active(this.options.initialIndex),this.$tabs.on(this.options.event,function(s){var a=e(s.target).index();return t.active(a),t.afterActive(),!1}),n.trigger("tabs::init",this)},active:function(t){var s=this;this.current!==t&&(this.current=t,this.$tabs.eq(t).addClass(this.classes.activeTab).siblings().removeClass(this.classes.activeTab),this.$panesItem.eq(t).addClass(this.classes.activePanes).siblings().removeClass(this.classes.activePanes),this.$panesItem.removeClass(this.classes.show),n.trigger("tabs::active",this),this.options.ajax===!0&&this.ajaxLoad(t),setTimeout(function(){s.$panesItem.eq(t).addClass(s.classes.show)},0))},afterActive:function(){n.trigger("tabs::afterActive",this)},ajaxLoad:function(t){var s,a=this;(this.options.cached!==!0||this.ajax[t].cached!==!0)&&(this.showLoading(),s=e.ajax({url:this.ajax[t].href}),s.done(function(s){a.ajax[t].cached=!0,a.hideLoading(),a.$panesItem.eq(t).html(s)}),s.fail(function(){a.hideLoading(),a.$panesItem.eq(t).html("failed")}))},showLoading:function(){this.$loading.appendTo(this.$panes)},hideLoading:function(){this.$loading.remove()},getTabs:function(){return this.$tabs},getPanes:function(){return this.$panesItem},getCurrentPane:function(){return this.$panesItem.eq(this.current)},getCurrentTab:function(){return this.$tabs.eq(this.current)},getIndex:function(){return this.current},next:function(){var t=this.$tabs.length,s=this.current;t-1>s?s++:s=0,this.active(s)},prev:function(){var t=this.$tabs.length,s=this.current;0===s?s=Math.abs(1-t):s-=1,this.active(s)},destroy:function(){this.$element.remove()}},e.fn.tabs=function(t){if("string"!=typeof t)return this.each(function(){e.data(this,"tabs")||e.data(this,"tabs",new i(this,t))});var s=t,n=arguments.length>1?Array.prototype.slice.call(arguments,1):a;if(!/^(getTabs|getPanes|getCurrentPane|getCurrentTab|getIndex)$/.test(s))return this.each(function(){var t=e.data(this,"tabs");t&&"function"==typeof t[s]&&t[s].apply(t,n)});var h=this.first().data("tabs");return h&&"function"==typeof h[s]?h[s].apply(h,n):a}})(window,document,jQuery),function(t){var s=$(t),e={states:{},reflash:!1,pushState:function(t){for(id in t)this.states[id]=t[id];this.reflash=!1,setTimeout($.proxy(this.changeStates,this),0)},changeStates:function(){var t="";this.reflash!==!0&&($.each(this.states,function(s,e){t+=s+"="+e+"&"}),window.location.hash=t.substr(0,t.length-1),this.reflash=!0)},getState:function(){var t,s=window.location.hash.replace("#","").replace("!",""),e={};return""===s?{}:(t=s.split("&"),$.each(t,function(t,s){if(0!=s){var a=s.match("#?(.*)=(.*)");a&&(e[a[1]]=a[2])}}),e)},reset:function(){this.reflash!==!0&&(this.states={},window.location.hash="#/",this.reflash=!0)}};s.on("tabs::init",function(t,s){s.options.history!==!1&&$(window).on("hashchange.tabs",function(){var t,a=e.getState(),n=s.$element.attr("id");a[n]&&(t=$("#"+n).data("tabs"),t&&t.active(a[n]))})}),s.on("tabs::afterActive",function(t,s){var a=s.current,n={},i=s.$element.attr("id"),h=s.$tabs.eq(a).attr("id");s.options.history!==!1&&(n[i]=h?h:a,e.pushState(n))}),setTimeout(function(){$(window).trigger("hashchange.tabs")},0)}(document),function(t){var s=$(t),e={keys:{UP:38,DOWN:40,LEFT:37,RIGHT:39,RETURN:13,ESCAPE:27,BACKSPACE:8,SPACE:32},map:{},bound:!1,press:function(t){var s=t.keyCode||t.which;s in e.map&&"function"==typeof e.map[s]&&e.map[s].call(self,t)},attach:function(t){var a,n;for(a in t)t.hasOwnProperty(a)&&(n=a.toUpperCase(),n in e.keys?e.map[e.keys[n]]=t[a]:e.map[n]=t[a]);e.bound||(e.bound=!0,s.bind("keydown",e.press))},detach:function(){e.bound=!1,e.map={},s.unbind("keydown",e.press)}};s.on("tabs::init",function(t,s){s.options.keyboard!==!1&&(s.$element.attr("tabindex","0").on("focus",function(){return e.attach({left:$.proxy(s.prev,s),right:$.proxy(s.next,s)}),!1}).on("blur",function(){return e.detach(),!1}),s.$panes.attr("tabindex","0").on("focus",function(){return e.attach({left:$.proxy(s.prev,s),right:$.proxy(s.next,s)}),!1}).on("blur",function(){return e.detach(),!1}))})}(document);